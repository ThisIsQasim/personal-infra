apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: entertainment
resources:
- namespace.yaml
- jellyfin.yaml
- jellyseerr.yaml
- prowlarr.yaml
- sonarr.yaml
- radarr.yaml
- transmission.yaml
- metube.yaml
- flaresolverr.yaml

generators:
- |
  apiVersion: viaduct.ai/v1
  kind: ksops
  metadata:
    name: secrets
    annotations:
      config.kubernetes.io/function: |
          exec:
            path: ksops
  secretFrom:
  - metadata:
      name: metube
      annotations:
        kustomize.config.k8s.io/needs-hash: "false"
    envs:
    - ./metube.enc.env
